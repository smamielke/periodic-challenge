<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Nuclear Fusion Visualizer ☀️ | Periodic Challenge</title>
<link rel="stylesheet" href="style.css" />

<style>
body {
  background: radial-gradient(circle at center, #000010, #0a0a2a);
  color: white;
  font-family: 'Poppins', sans-serif;
  margin: 0;
  overflow-x: hidden;
}
main {
  max-width: 1000px;
  margin: 40px auto;
  background: rgba(255,255,255,0.05);
  border-radius: 20px;
  padding: 30px;
  box-shadow: 0 0 50px rgba(0,0,0,0.5);
}
h1 {
  text-align: center;
  font-size: 2.4rem;
}
p {
  text-align: center;
  opacity: 0.8;
}
canvas {
  display: block;
  margin: 40px auto 20px;
  background: radial-gradient(circle at center, #000015, #01001a, #000);
  border-radius: 16px;
  box-shadow: 0 0 40px rgba(0,0,0,0.8);
}
.controls {
  display: flex;
  justify-content: center;
  gap: 20px;
}
button {
  padding: 10px 18px;
  border: none;
  border-radius: 10px;
  background: linear-gradient(90deg, #3b82f6, #06b6d4);
  color: white;
  font-weight: 600;
  cursor: pointer;
  transition: 0.2s;
}
button:hover { transform: scale(1.05); }

.flash {
  position: absolute;
  top: 0; left: 0;
  width: 100%; height: 100%;
  background: radial-gradient(circle, #ffffcc 0%, transparent 70%);
  opacity: 0;
  pointer-events: none;
  transition: opacity 0.4s;
}
.energy-wave {
  position: absolute;
  top: 50%; left: 50%;
  width: 10px; height: 10px;
  border-radius: 50%;
  transform: translate(-50%, -50%);
  background: radial-gradient(circle, rgba(255,255,100,0.7) 0%, transparent 70%);
  opacity: 0;
  pointer-events: none;
}

.info-panel {
  background: rgba(255,255,255,0.07);
  padding: 20px;
  border-radius: 12px;
  margin-top: 20px;
  text-align: center;
  font-size: 1.05rem;
  line-height: 1.6;
}
.info-panel h3 {
  color: #facc15;
}
.energy-counter {
  font-family: 'Courier New', monospace;
  font-size: 1.2rem;
  color: #fbbf24;
  margin-top: 8px;
}
</style>
</head>
<body>
<main>
  <h1>☀️ Nuclear Fusion Visualizer</h1>
  <p>Follow the journey from hydrogen atoms to the incredible power of fusion energy!</p>

  <div class="controls">
    <button id="startBtn">Start Fusion</button>
    <button id="resetBtn">Reset</button>
  </div>

  <div style="position:relative;">
    <canvas id="fusionCanvas" width="800" height="400"></canvas>
    <div class="flash" id="flash"></div>
    <div class="energy-wave" id="wave"></div>
  </div>

  <div class="info-panel" id="info">
    <h3>Stage 1: Hydrogen in the Plasma</h3>
    <p>Hydrogen atoms are zooming through the hot plasma at millions of degrees. They rarely collide, but when they do… magic happens.</p>
    <div class="energy-counter">Energy Released: 0 J</div>
  </div>
</main>

<script>
const canvas = document.getElementById("fusionCanvas");
const ctx = canvas.getContext("2d");
const flash = document.getElementById("flash");
const wave = document.getElementById("wave");
const info = document.getElementById("info");
const energyCounter = info.querySelector(".energy-counter");

let step = 0;
let particles = [];
let anim;
let totalEnergy = 0; // in joules

function resetScene() {
  cancelAnimationFrame(anim);
  flash.style.opacity = 0;
  wave.style.opacity = 0;
  totalEnergy = 0;
  energyCounter.textContent = "Energy Released: 0 J";
  step = 0;
  particles = [
    {x:250, y:200, vx:0, color:"#60a5fa"},
    {x:550, y:200, vx:0, color:"#60a5fa"}
  ];
  draw();
  info.innerHTML = `
    <h3>Stage 1: Hydrogen in the Plasma</h3>
    <p>Hydrogen atoms are zooming through the hot plasma at millions of degrees. They rarely collide, but when they do… magic happens.</p>
    <div class="energy-counter">Energy Released: 0 J</div>`;
}

function drawParticle(p) {
  const g = ctx.createRadialGradient(p.x, p.y, 5, p.x, p.y, 20);
  g.addColorStop(0, "#fff");
  g.addColorStop(1, p.color);
  ctx.fillStyle = g;
  ctx.beginPath();
  ctx.arc(p.x, p.y, 20, 0, Math.PI*2);
  ctx.fill();
}

function drawHelium(x, y) {
  const g = ctx.createRadialGradient(x, y, 10, x, y, 40);
  g.addColorStop(0, "#fff");
  g.addColorStop(1, "#facc15");
  ctx.fillStyle = g;
  ctx.beginPath();
  ctx.arc(x, y, 40, 0, Math.PI*2);
  ctx.fill();
}

function draw() {
  ctx.clearRect(0,0,canvas.width,canvas.height);
  for (const p of particles) drawParticle(p);
}

function updateInfo(title, text) {
  info.querySelector("h3").textContent = title;
  info.querySelector("p").textContent = text;
}

function addEnergy(amount) {
  totalEnergy += amount;
  const tntEquivalent = (totalEnergy / 4.184e9).toFixed(5);
  energyCounter.textContent = `Energy Released: ${totalEnergy.toExponential(3)} J (~${tntEquivalent} tons TNT)`;
}

function animateFusion() {
  step++;
  if (step === 1) updateInfo("Stage 2: Atoms Accelerating", "The hydrogen nuclei accelerate through the plasma, approaching each other at high speeds.");
  if (step === 60) {
    particles[0].vx = 2;
    particles[1].vx = -2;
  }

  if (step > 60 && step < 130) {
    particles.forEach(p => p.x += p.vx);
  }

  if (step === 130) {
    flash.style.opacity = 1;
    setTimeout(() => flash.style.opacity = 0, 400);
    updateInfo("Stage 3: Quantum Tunneling", "Despite repelling each other, the protons fuse due to quantum tunneling — a quantum miracle!");
    addEnergy(1e13);
  }

  if (step === 200) {
    updateInfo("Stage 4: Fusion Ignition", "Two protons have fused to form deuterium (¹H + ¹H → ²H + e⁺ + νₑ). A positron and a neutrino escape, carrying away energy.");
    addEnergy(5e13);
  }

  if (step === 270) {
    flash.style.opacity = 1;
    setTimeout(() => flash.style.opacity = 0, 500);
    updateInfo("Stage 5: Chain Reaction", "More hydrogen joins, forming Helium-3, then Helium-4. Energy output grows exponentially!");
    addEnergy(2e14);
  }

  if (step === 340) {
    wave.style.opacity = 1;
    wave.animate([{ transform: 'translate(-50%, -50%) scale(0)', opacity: 1 }, { transform: 'translate(-50%, -50%) scale(8)', opacity: 0 }], { duration: 2000 });
    drawHelium(400, 200);
    updateInfo("Stage 6: Stellar Power Released", "Helium is formed. The missing mass becomes pure energy. This single reaction releases energy equal to 100 million chemical reactions!");
    addEnergy(3e14);
  }

  if (step === 440) {
    updateInfo("Stage 7: The Heart of the Stars", "This is how stars — including our Sun — shine for billions of years, fusing hydrogen into helium and light.");
    addEnergy(1e15);
  }

  if (step === 540) {
    updateInfo("Stage 8: Humanity’s Dream", "If controlled, fusion could power Earth with nearly limitless clean energy. Projects like ITER are making it real.");
    addEnergy(5e15);
    cancelAnimationFrame(anim);
    return;
  }

  draw();
  anim = requestAnimationFrame(animateFusion);
}

document.getElementById("startBtn").onclick = () => {
  cancelAnimationFrame(anim);
  step = 0;
  animateFusion();
};
document.getElementById("resetBtn").onclick = resetScene;

resetScene();
</script>
</body>
</html>
