<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Nuclear Fusion Visualizer ☀️ | Periodic Challenge</title>
<link rel="stylesheet" href="style.css" />

<style>
body {
  background: radial-gradient(circle at center, #000010, #0a0a2a);
  color: white;
  font-family: 'Poppins', sans-serif;
  margin: 0;
  overflow-x: hidden;
}
main {
  max-width: 1000px;
  margin: 40px auto;
  background: rgba(255,255,255,0.05);
  border-radius: 20px;
  padding: 30px;
  box-shadow: 0 0 50px rgba(0,0,0,0.5);
}
h1 {
  text-align: center;
  font-size: 2.4rem;
  margin-bottom: 5px;
}
p {
  text-align: center;
  opacity: 0.8;
}
canvas {
  display: block;
  margin: 40px auto 20px;
  background: radial-gradient(circle at center, #000015, #01001a, #000);
  border-radius: 16px;
  box-shadow: 0 0 40px rgba(0,0,0,0.8);
}
.controls {
  display: flex;
  justify-content: center;
  gap: 20px;
  margin-bottom: 20px;
}
button {
  padding: 10px 18px;
  border: none;
  border-radius: 10px;
  background: linear-gradient(90deg, #3b82f6, #06b6d4);
  color: white;
  font-weight: 600;
  cursor: pointer;
  transition: 0.2s;
}
button:hover { transform: scale(1.05); }

.flash {
  position: absolute;
  top: 0; left: 0;
  width: 100%; height: 100%;
  background: radial-gradient(circle, #ffffcc 0%, transparent 70%);
  opacity: 0;
  pointer-events: none;
  transition: opacity 0.4s;
}
.energy-wave {
  position: absolute;
  top: 50%; left: 50%;
  width: 10px; height: 10px;
  border-radius: 50%;
  transform: translate(-50%, -50%);
  background: radial-gradient(circle, rgba(255,255,100,0.7) 0%, transparent 70%);
  opacity: 0;
  pointer-events: none;
}

.info-panel {
  background: rgba(255,255,255,0.07);
  padding: 20px;
  border-radius: 12px;
  margin-top: 20px;
  text-align: center;
  font-size: 1.05rem;
  line-height: 1.6;
}
.info-panel h3 {
  color: #facc15;
}
.energy-counter {
  font-family: 'Courier New', monospace;
  font-size: 1.2rem;
  color: #fbbf24;
  margin-top: 8px;
}
.fact-panel {
  margin-top: 25px;
  background: rgba(255,255,255,0.05);
  border-radius: 12px;
  padding: 20px;
}
.fact-panel h3 {
  color: #38bdf8;
  margin-bottom: 12px;
}
.fact-grid {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 10px;
  text-align: left;
}
.fact {
  background: rgba(255,255,255,0.08);
  padding: 10px;
  border-radius: 8px;
  font-size: 0.95rem;
}
</style>
</head>
<body>
<main>
  <h1>☀️ Nuclear Fusion Visualizer</h1>
  <p>Explore the stages of hydrogen fusion — the process that powers the stars.</p>

  <div class="controls">
    <button id="startBtn">▶ Start</button>
    <button id="pauseBtn">⏸ Pause</button>
    <button id="resetBtn">🔄 Reset</button>
  </div>

  <div style="position:relative;">
    <canvas id="fusionCanvas" width="800" height="400"></canvas>
    <div class="flash" id="flash"></div>
    <div class="energy-wave" id="wave"></div>
  </div>

  <div class="info-panel" id="info">
    <h3>Stage 1: Hydrogen in the Plasma</h3>
    <p>Hydrogen atoms move rapidly inside the plasma at temperatures over 15 million °C. Occasionally, two collide and start something incredible...</p>
    <div class="energy-counter" id="energyCounter">Energy Released: 0 J</div>
  </div>

  <div class="fact-panel">
    <h3>Scientific Facts 🔬</h3>
    <div class="fact-grid">
      <div class="fact">🌡️ <b>Temperature:</b> >15 million Kelvin</div>
      <div class="fact">⚛️ <b>Reaction:</b> 4¹H → ⁴He + 2e⁺ + 2ν + Energy</div>
      <div class="fact">💥 <b>Mass Loss:</b> ~0.7% converted to energy (E = mc²)</div>
      <div class="fact">☀️ <b>Sun’s Power Output:</b> 3.8 × 10²⁶ W</div>
      <div class="fact">🔋 <b>1 g of H fusion:</b> ≈ 20,000 gallons of gasoline</div>
      <div class="fact">🧠 <b>Key Force:</b> Strong Nuclear Force binds protons together</div>
    </div>
  </div>
</main>

<script>
const canvas = document.getElementById("fusionCanvas");
const ctx = canvas.getContext("2d");
const flash = document.getElementById("flash");
const wave = document.getElementById("wave");
const info = document.getElementById("info");
const energyCounter = document.getElementById("energyCounter");

let step = 0;
let particles = [];
let anim;
let paused = false;
let totalEnergy = 0;

function resetScene() {
  cancelAnimationFrame(anim);
  flash.style.opacity = 0;
  wave.style.opacity = 0;
  totalEnergy = 0;
  energyCounter.textContent = "Energy Released: 0 J";
  step = 0;
  paused = false;
  particles = [
    {x:250, y:200, vx:0, color:"#60a5fa"},
    {x:550, y:200, vx:0, color:"#60a5fa"}
  ];
  draw();
  info.querySelector("h3").textContent = "Stage 1: Hydrogen in the Plasma";
  info.querySelector("p").textContent = "Hydrogen atoms move rapidly inside the plasma at temperatures over 15 million °C. Occasionally, two collide and start something incredible...";
}

function drawParticle(p) {
  const g = ctx.createRadialGradient(p.x, p.y, 5, p.x, p.y, 20);
  g.addColorStop(0, "#fff");
  g.addColorStop(1, p.color);
  ctx.fillStyle = g;
  ctx.beginPath();
  ctx.arc(p.x, p.y, 20, 0, Math.PI*2);
  ctx.fill();
}

function drawHelium(x, y) {
  const g = ctx.createRadialGradient(x, y, 10, x, y, 40);
  g.addColorStop(0, "#fff");
  g.addColorStop(1, "#facc15");
  ctx.fillStyle = g;
  ctx.beginPath();
  ctx.arc(x, y, 40, 0, Math.PI*2);
  ctx.fill();
}

function draw() {
  ctx.clearRect(0,0,canvas.width,canvas.height);
  for (const p of particles) drawParticle(p);
}

function addEnergy(amount) {
  totalEnergy += amount;
  const tnt = (totalEnergy / 4.184e9).toFixed(4);
  energyCounter.textContent = `Energy Released: ${totalEnergy.toExponential(3)} J (~${tnt} tons TNT)`;
}

function updateInfo(title, text) {
  info.querySelector("h3").textContent = title;
  info.querySelector("p").textContent = text;
}

function animateFusion() {
  if (paused) return;
  step++;

  // Timed stages
  if (step === 50) updateInfo("Stage 2: Acceleration", "The hydrogen nuclei accelerate, overcoming electromagnetic repulsion with quantum tunneling.");
  if (step === 100) {
    particles[0].vx = 2; particles[1].vx = -2;
  }

  if (step > 100 && step < 180) {
    particles.forEach(p => p.x += p.vx);
  }

  if (step === 180) {
    flash.style.opacity = 1;
    setTimeout(() => flash.style.opacity = 0, 300);
    updateInfo("Stage 3: Fusion Ignition", "Two protons fuse into deuterium (¹H + ¹H → ²H + e⁺ + νₑ). A positron and neutrino escape.");
    addEnergy(1e13);
  }

  if (step === 260) {
    updateInfo("Stage 4: Helium-3 Formation", "Deuterium nuclei collide with protons, forming helium-3 — releasing more energy each time.");
    addEnergy(3e13);
  }

  if (step === 340) {
    wave.style.opacity = 1;
    wave.animate([{ transform: 'translate(-50%, -50%) scale(0)', opacity: 1 }, { transform: 'translate(-50%, -50%) scale(8)', opacity: 0 }], { duration: 2500 });
    drawHelium(400, 200);
    flash.style.opacity = 1;
    setTimeout(() => flash.style.opacity = 0, 500);
    updateInfo("Stage 5: Helium-4 Creation", "Two helium-3 atoms combine to form stable helium-4 — the key step that powers stars.");
    addEnergy(2e14);
  }

  if (step === 460) {
    updateInfo("Stage 6: Energy Burst", "The lost mass becomes radiant energy — equivalent to 100 million chemical reactions at once!");
    addEnergy(3e14);
  }

  if (step === 580) {
    updateInfo("Stage 7: Stellar Power", "This same process in the Sun converts 600 million tons of hydrogen into helium every second.");
    addEnergy(5e14);
  }

  if (step === 700) {
    updateInfo("Stage 8: Humanity’s Future", "Projects like ITER and SPARC aim to replicate this clean, limitless energy on Earth. The power of the stars — in our hands.");
    addEnergy(1e15);
    cancelAnimationFrame(anim);
    return;
  }

  draw();
  anim = requestAnimationFrame(animateFusion);
}

document.getElementById("startBtn").onclick = () => {
  paused = false;
  cancelAnimationFrame(anim);
  animateFusion();
};
document.getElementById("pauseBtn").onclick = () => paused = !paused;
document.getElementById("resetBtn").onclick = resetScene;

resetScene();
</script>
</body>
</html>
